# Инструкции по установке библиотеки SHAP

## Описание

SHAP (SHapley Additive exPlanations) - это игровая теоретическая методология для объяснения вывода любой модели машинного обучения. Для работы скрипта анализа важности признаков `analyze_feature_importance.py` необходимо установить библиотеку SHAP.

## Установка

### Вариант 1: Установка через pip (рекомендуется)

```bash
pip install shap
```

### Вариант 2: Установка через conda

```bash
conda install -c conda-forge shap
```

## Зависимости

Библиотека SHAP имеет следующие зависимости, которые должны быть установлены автоматически:
- numpy
- scipy
- scikit-learn
- matplotlib
- pandas
- tqdm
- packaging

Для работы с PyTorch моделями (как в нашем случае) также требуется:
- torch

## Проверка установки

После установки можно проверить, что библиотека установлена корректно:

```python
import shap
print(shap.__version__)
```

## Возможные проблемы и решения

### 1. Ошибка "No module named 'shap'"

Убедитесь, что вы установили библиотеку в правильное виртуальное окружение, если вы его используете.

### 2. Проблемы с совместимостью версий

Если возникают проблемы с совместимостью, попробуйте установить конкретную версию:

```bash
pip install shap==0.42.1
```

### 3. Проблемы с компиляцией

На некоторых системах могут возникнуть проблемы с компиляцией C++ расширений. В этом случае можно установить версию без C++ расширений:

```bash
pip install shap --no-binary :all:
```

## Использование

После установки скрипт `analyze_feature_importance.py` должен работать корректно и генерировать визуализации важности признаков в папке `shap_analysis`.