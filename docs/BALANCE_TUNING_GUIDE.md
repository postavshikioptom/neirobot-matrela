# üéØ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –±—ã—Å—Ç—Ä–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –±–∞–ª–∞–Ω—Å–∞ –∫–ª–∞—Å—Å–æ–≤

## üìä –¢–µ–∫—É—â–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏

### –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π:
1. **v3.0 –∏—Å—Ö–æ–¥–Ω–∞—è**: 98% HOLD –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π
2. **v3.1 –ø–µ—Ä–≤–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞**: 74.5% SELL, 3.5% HOLD, 22.0% BUY
3. **v3.2 —Ç–µ–∫—É—â–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞**: –û–∂–∏–¥–∞–µ–º ~32% SELL, ~36% HOLD, ~32% BUY

## üîß –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### 1. TARGET_CLASS_RATIOS (–æ—Å–Ω–æ–≤–Ω–æ–π —Ä—ã—á–∞–≥)
```python
TARGET_CLASS_RATIOS = [SELL, HOLD, BUY]  # –°—É–º–º–∞ = 1.0
```
- **–£–≤–µ–ª–∏—á–∏—Ç—å –∫–ª–∞—Å—Å**: –£–≤–µ–ª–∏—á–∏—Ç—å –µ–≥–æ –¥–æ–ª—é –Ω–∞ 0.02-0.05
- **–£–º–µ–Ω—å—à–∏—Ç—å –∫–ª–∞—Å—Å**: –£–º–µ–Ω—å—à–∏—Ç—å –µ–≥–æ –¥–æ–ª—é –Ω–∞ 0.02-0.05

### 2. AFL_ALPHA (–≤–µ—Å–∞ –∫–ª–∞—Å—Å–æ–≤ –≤ Focal Loss)
```python
AFL_ALPHA = [SELL_weight, HOLD_weight, BUY_weight]
```
- **–ë–æ–ª—å—à–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π –∫–ª–∞—Å—Å–∞**: –£–≤–µ–ª–∏—á–∏—Ç—å –µ–≥–æ –≤–µ—Å –Ω–∞ 0.1-0.2
- **–ú–µ–Ω—å—à–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π –∫–ª–∞—Å—Å–∞**: –£–º–µ–Ω—å—à–∏—Ç—å –µ–≥–æ –≤–µ—Å –Ω–∞ 0.1-0.2
- **–î–∏–∞–ø–∞–∑–æ–Ω**: 0.5 - 1.5

### 3. AFL_GAMMA (—Ñ–æ–∫—É—Å –Ω–∞ —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö)
```python
AFL_GAMMA = [SELL_focus, HOLD_focus, BUY_focus]
```
- **–ë–æ–ª—å—à–µ –≤–Ω–∏–º–∞–Ω–∏—è –∫ –∫–ª–∞—Å—Å—É**: –£–≤–µ–ª–∏—á–∏—Ç—å –Ω–∞ 0.2-0.5
- **–ú–µ–Ω—å—à–µ –≤–Ω–∏–º–∞–Ω–∏—è –∫ –∫–ª–∞—Å—Å—É**: –£–º–µ–Ω—å—à–∏—Ç—å –Ω–∞ 0.2-0.5
- **–î–∏–∞–ø–∞–∑–æ–Ω**: 1.0 - 3.0

## üöÄ –ë—ã—Å—Ç—Ä—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏

### –ï—Å–ª–∏ SELL —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ (>40%):
```python
AFL_ALPHA[0] -= 0.1-0.2  # –£–º–µ–Ω—å—à–∏—Ç—å –≤–µ—Å SELL
AFL_GAMMA[0] -= 0.2      # –ú–µ–Ω—å—à–µ —Ñ–æ–∫—É—Å–∞ –Ω–∞ SELL
TARGET_CLASS_RATIOS[0] -= 0.02  # –ú–µ–Ω—å—à–µ —Ü–µ–ª–µ–≤–∞—è –¥–æ–ª—è SELL
```

### –ï—Å–ª–∏ HOLD —Å–ª–∏—à–∫–æ–º –º–∞–ª–æ (<30%):
```python
AFL_ALPHA[1] += 0.1-0.2  # –£–≤–µ–ª–∏—á–∏—Ç—å –≤–µ—Å HOLD
AFL_GAMMA[1] += 0.2      # –ë–æ–ª—å—à–µ —Ñ–æ–∫—É—Å–∞ –Ω–∞ HOLD
TARGET_CLASS_RATIOS[1] += 0.02  # –ë–æ–ª—å—à–µ —Ü–µ–ª–µ–≤–∞—è –¥–æ–ª—è HOLD
```

### –ï—Å–ª–∏ BUY —Å–ª–∏—à–∫–æ–º –º–∞–ª–æ (<25%):
```python
AFL_ALPHA[2] += 0.1-0.2  # –£–≤–µ–ª–∏—á–∏—Ç—å –≤–µ—Å BUY
AFL_GAMMA[2] += 0.2      # –ë–æ–ª—å—à–µ —Ñ–æ–∫—É—Å–∞ –Ω–∞ BUY
TARGET_CLASS_RATIOS[2] += 0.02  # –ë–æ–ª—å—à–µ —Ü–µ–ª–µ–≤–∞—è –¥–æ–ª—è BUY
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### 1. –ù–µ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–µ –Ω–∞–¥—É–≤–∞–Ω–∏–µ
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–ª–∏—è—é—Ç –Ω–∞ **–æ–±—É—á–µ–Ω–∏–µ**, –Ω–µ –Ω–∞ **–¥–∞–Ω–Ω—ã–µ**
- –ú–æ–¥–µ–ª—å —É—á–∏—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Å–∞
- –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –º–æ–¥–µ–ª—å –±—É–¥–µ—Ç –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ä—ã–Ω–æ—á–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤

### 2. –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º —Ä—ã–Ω–∫–∞
- –ü—Ä–∏ —Å–º–µ–Ω–µ —Ä—ã–Ω–æ—á–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π –∫–∞–∂–¥—ã–µ 5-10 —ç–ø–æ—Ö
- –í–µ–¥–∏—Ç–µ –ª–æ–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è –æ—Ç–∫–∞—Ç–∞ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ out-of-sample –¥–∞–Ω–Ω—ã—Ö
- –°—Ä–∞–≤–Ω–∏–≤–∞–π—Ç–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Ä—ã–Ω–æ—á–Ω—ã–º–∏ —É—Å–ª–æ–≤–∏—è–º–∏
- –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

### –¶–µ–ª–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏:
- **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π**: 25-35% –∫–∞–∂–¥—ã–π –∫–ª–∞—Å—Å
- **F1-Score Macro**: >0.4
- **F1-Score Weighted**: >0.45
- **–¢–æ—á–Ω–æ—Å—Ç—å**: >40%

### –ö—Ä–∞—Å–Ω—ã–µ —Ñ–ª–∞–≥–∏:
- –û–¥–∏–Ω –∫–ª–∞—Å—Å >70% –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π
- F1-Score Macro <0.2
- –†–µ–∑–∫–æ–µ –ø–∞–¥–µ–Ω–∏–µ —Ç–æ—á–Ω–æ—Å—Ç–∏
- –ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –º–µ–∂–¥—É —ç–ø–æ—Ö–∞–º–∏

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–±—É—á–µ–Ω–∏–µ** —Å —Ç–µ–∫—É—â–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
2. **–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å** —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ 2-3 —ç–ø–æ—Ö–µ
3. **–°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å** –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ —Ä–µ—Ü–µ–ø—Ç–∞–º –≤—ã—à–µ
4. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å** –æ–±—É—á–µ–Ω–∏–µ
5. **–ü–æ–≤—Ç–æ—Ä–∏—Ç—å** –¥–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞

### –†–∞–∑–º–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–æ–∫:
- **–ú–∞–ª—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è**: ¬±0.05 –¥–ª—è TARGET_CLASS_RATIOS, ¬±0.1 –¥–ª—è AFL_ALPHA
- **–°—Ä–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è**: ¬±0.1 –¥–ª—è TARGET_CLASS_RATIOS, ¬±0.2 –¥–ª—è AFL_ALPHA
- **–ë–æ–ª—å—à–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è**: ¬±0.15 –¥–ª—è TARGET_CLASS_RATIOS, ¬±0.3 –¥–ª—è AFL_ALPHA

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ö–æ–Ω—Ñ–ª–∏–∫—Ç Sample Weights –∏ AFL

### ‚ùå **–ù–∞–π–¥–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
- **Sample Weights** (sklearn): `[1.66, 0.65, 1.14]` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤–µ—Å–∞
- **AFL_ALPHA** (config): `[0.8, 1.1, 1.2]` - –Ω–∞—à–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ö–æ–Ω—Ñ–ª–∏–∫—Ç –ø—Ä–∏–≤–æ–¥–∏–ª –∫ –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é –º–æ–¥–µ–ª–∏

### ‚úÖ **–†–µ—à–µ–Ω–∏–µ:**
1. **–û—Ç–∫–ª—é—á–∏–ª–∏ Sample Weights** –≤ `train_model.py`
2. **–°–±—Ä–æ—Å–∏–ª–∏ AFL –∫ –±–∞–∑–æ–≤—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º**: `[1.0, 1.0, 1.0]`
3. **–ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ TARGET_CLASS_RATIOS** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–æ–º

### üéØ **–ù–æ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏:**
```python
# –û—Å–Ω–æ–≤–Ω–æ–π —Ä—ã—á–∞–≥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
TARGET_CLASS_RATIOS = [0.33, 0.34, 0.33]  # –ü–æ—á—Ç–∏ —Ä–∞–≤–Ω—ã–µ –¥–æ–ª–∏

# –ë–∞–∑–æ–≤—ã–µ AFL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤)
AFL_ALPHA = [1.0, 1.0, 1.0]    # –†–∞–≤–Ω—ã–µ –≤–µ—Å–∞
AFL_GAMMA = [2.0, 2.0, 2.0]    # –†–∞–≤–Ω—ã–π —Ñ–æ–∫—É—Å
CLASS_SMOOTHING = [0.05, 0.05, 0.05]  # –†–∞–≤–Ω–æ–µ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ
```

========
üéØ –û—Ç–≤–µ—Ç –Ω–∞ –≤–∞—à–∏ –≤–∞–∂–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã:
1. –ù–µ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–µ –Ω–∞–¥—É–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤ ‚úÖ
–ú—ã –ù–ï –º–µ–Ω—è–µ–º –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –ª–µ–π–±–ª—ã
–ú—ã –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –ø—Ä–æ—Ü–µ—Å—Å –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–∏
–ú–æ–¥–µ–ª—å —É—á–∏—Ç—Å—è –ª—É—á—à–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Å–∞
–í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –º–æ–¥–µ–ª—å –±—É–¥–µ—Ç –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ä—ã–Ω–æ—á–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤
2. –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º —Ä—ã–Ω–∫–∞ ‚úÖ
–°–æ–∑–¥–∞–ª —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –±—ã—Å—Ç—Ä–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ (BALANCE_TUNING_GUIDE.md)
–ü—Ä–æ—Å—Ç—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–ª—è —Ä–∞–Ω–Ω–µ–≥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –¥–∏—Å–±–∞–ª–∞–Ω—Å–∞